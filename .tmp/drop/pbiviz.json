{"visual":{"name":"pbiflatprogress111","displayName":"pbi_flatprogress_1_11","guid":"pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5","visualClassName":"Visual","version":"1.0.0","description":"","supportUrl":"https://github.com/payns75/pbi_flatprogress","gitHubUrl":"https://github.com/payns75/pbi_flatprogress"},"apiVersion":"1.11.0","author":{"name":"Rémy Jacquemin","email":"rjacquemin75@gmail.com"},"assets":{"icon":"assets/icon.png"},"externalJS":["node_modules/powerbi-visuals-utils-dataviewutils/lib/index.js","node_modules/d3-selection/dist/d3-selection.min.js","d3Injector.js"],"style":"style/visual.less","capabilities":{"dataRoles":[{"displayName":"Measure Data","name":"measure","kind":"Measure"},{"displayName":"Objectif Data","name":"objectif_measure","kind":"Measure"},{"displayName":"Point de Passage","name":"pt_passage_measure","kind":"Measure"}],"dataViewMappings":[{"conditions":[{"measure":{"min":1,"max":1},"objectif_measure":{"max":1},"pt_passage_measure":{"max":1}}],"categorical":{"values":{"select":[{"bind":{"to":"measure"}},{"bind":{"to":"objectif_measure"}},{"bind":{"to":"pt_passage_measure"}}]}}}],"objects":{"dataDisplay":{"displayName":"Data display","properties":{"backColor":{"displayName":"Back color","type":{"fill":{"solid":{"color":true}}}},"fill":{"displayName":"Fill","type":{"fill":{"solid":{"color":true}}}}}},"dataOption":{"displayName":"Data option","properties":{"ptPassage":{"displayName":"Avec pt de passage","type":{"bool":true}},"prctMode":{"displayName":"Mode %","type":{"bool":true}}}}}},"stringResources":{},"content":{"js":"var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,r){void 0===t&&(t=[]);var i=t;return n(i),e&&(i.identityFields=e),r&&(i.source=r),i}function n(t,e){t.grouped=e?function(){return e}:function(){return r(t)}}function r(t){for(var e,n=[],r=0,i=t.length;i>r;r++){var o=t[r];if(!e||e.identity!==o.identity){if(e={values:[]},o.identity){e.identity=o.identity;var a=o.source;void 0!==a.groupName?e.name=a.groupName:a.displayName&&(e.name=a.displayName)}n.push(e)}e.values.push(o)}return n}t.createValueColumns=e,t.setGrouped=n,t.groupValues=r}(e=t.DataViewTransform||(t.DataViewTransform={}))}(e=t.dataview||(t.dataview={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e){if(!t||!t.length)return-1;var n=t[0];if(n.values&&n.values.length>0)for(var i=0,o=n.values.length;o>i;++i){var a=n.values[i];if(a&&a.source&&r(a.source,e))return i}return-1}function n(t,e){if(t&&t.length)for(var n=0,i=t.length;i>n;n++)if(r(t[n].source,e))return n;return-1}function r(t,e){var n=t.roles;return n&&n[e]}function i(t,e){return null!=t&&null!=t.metadata&&t.metadata.columns&&t.metadata.columns.some(function(t){return t.roles&&void 0!==t.roles[e]})}function o(t,e){return t&&t.source&&t.source.roles&&t.source.roles[e]===!0}t.getMeasureIndexOfRole=e,t.getCategoryIndexOfRole=n,t.hasRole=r,t.hasRoleInDataView=i,t.hasRoleInValueColumn=o}(e=t.DataRoleHelper||(t.DataRoleHelper={}))}(e=t.dataview||(t.dataview={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){function e(t,e,n){if(!t)return n;var r=t[e];return void 0===r?n:r}function n(t,n,r){var i=e(t,n);return i&&i.solid?i.solid.color:r}t.getValue=e,t.getFillColorByPropertyName=n}(e=t.DataViewObject||(t.DataViewObject={}))}(e=t.dataview||(t.dataview={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e;!function(e){function n(e,n,r){return e?t.DataViewObject.getValue(e[n.objectName],n.propertyName,r):r}function r(t,e,n){return t&&t[e]?t[e]:n}function i(t,e,r){var i=n(t,e);return i&&i.solid?i.solid.color:r}function o(t,e,r){var i=n(t,e,r);return i&&i.solid?i.solid.color:void 0===i||null===i||\"object\"==typeof i&&!i.solid?r:i}e.getValue=n,e.getObject=r,e.getFillColor=i,e.getCommonValue=o}(e=t.DataViewObjects||(t.DataViewObjects={}))}(e=t.dataview||(t.dataview={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){var n,r=t.extensibility.utils.dataview.DataRoleHelper;!function(t){function e(t,e,n){if(t.categories&&t.categories.length>0){var i=t.categories[0];return i.source&&r.hasRole(i.source,e)&&r.hasRole(i.source,n)}return!1}function n(t){return void 0!==t.groupName?t.groupName:t.queryName}function i(t){var e=a(t);return null!=e&&e.imageUrl===!0}function o(t){var e=a(t);return null!=e&&e.webUrl===!0}function a(t){return t&&t.type&&t.type.misc}function u(t){return t&&t.metadata&&t.metadata.columns&&t.metadata.columns.length?t.metadata.columns.some(function(t){return i(t)===!0}):!1}t.categoryIsAlsoSeriesRole=e,t.getSeriesName=n,t.isImageUrlColumn=i,t.isWebUrlColumn=o,t.getMiscellaneousTypeDescriptor=a,t.hasImageUrlColumn=u}(n=e.converterHelper||(e.converterHelper={}))}(n=e.dataview||(e.dataview={}))}(n=e.utils||(e.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function e(){}return e.getDefault=function(){return new this},e.createPropertyIdentifier=function(t,e){return{objectName:t,propertyName:e}},e.parse=function(e){var n,r=this.getDefault();if(!e||!e.metadata||!e.metadata.objects)return r;n=r.getProperties();for(var i in n)for(var o in n[i]){var a=r[i][o];r[i][o]=t.DataViewObjects.getCommonValue(e.metadata.objects,n[i][o],a)}return r},e.isPropertyEnumerable=function(t){return!e.InnumerablePropertyPrefix.test(t)},e.enumerateObjectInstances=function(t,e){var n=t&&t[e.objectName];if(!n)return[];var r={objectName:e.objectName,selector:null,properties:{}};for(var i in n)n.hasOwnProperty(i)&&(r.properties[i]=n[i]);return{instances:[r]}},e.prototype.getProperties=function(){var t=this,n={},r=Object.keys(this);return r.forEach(function(r){if(e.isPropertyEnumerable(r)){var i=Object.keys(t[r]);n[r]={},i.forEach(function(t){e.isPropertyEnumerable(r)&&(n[r][t]=e.createPropertyIdentifier(r,t))})}}),n},e}();e.InnumerablePropertyPrefix=/^_/,t.DataViewObjectsParser=e}(e=t.dataview||(t.dataview={}))}(e=t.utils||(t.utils={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={})),!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?e(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],e):e(t.d3=t.d3||{})}(this,function(t){\"use strict\";function e(t){var e=t+=\"\",n=e.indexOf(\":\");return n>=0&&\"xmlns\"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),k.hasOwnProperty(e)?{space:k[e],local:t}:t}function n(t){var n=e(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===F&&e.documentElement.namespaceURI===F?e.createElement(t):e.createElementNS(n,t)}})(n)}function r(){}function i(t){return null==t?r:function(){return this.querySelector(t)}}function o(){return[]}function a(t){return null==t?o:function(){return this.querySelectorAll(t)}}function u(t){return new Array(t.length)}function s(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function c(t,e,n,r,i,o){for(var a,u=0,c=e.length,l=o.length;l>u;++u)(a=e[u])?(a.__data__=o[u],r[u]=a):n[u]=new s(t,o[u]);for(;c>u;++u)(a=e[u])&&(i[u]=a)}function l(t,e,n,r,i,o,a){var u,c,l,f={},h=e.length,p=o.length,d=new Array(h);for(u=0;h>u;++u)(c=e[u])&&(d[u]=l=G+a.call(c,c.__data__,u,e),l in f?i[u]=c:f[l]=c);for(u=0;p>u;++u)(c=f[l=G+a.call(t,o[u],u,o)])?(r[u]=c,c.__data__=o[u],f[l]=null):n[u]=new s(t,o[u]);for(u=0;h>u;++u)(c=e[u])&&f[d[u]]===c&&(i[u]=c)}function f(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function h(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function p(t,e){return t.style.getPropertyValue(e)||h(t).getComputedStyle(t,null).getPropertyValue(e)}function d(t){return t.trim().split(/^|\\s+/)}function v(t){return t.classList||new m(t)}function m(t){this._node=t,this._names=d(t.getAttribute(\"class\")||\"\")}function g(t,e){for(var n=v(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function _(t,e){for(var n=v(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function y(){this.textContent=\"\"}function w(){this.innerHTML=\"\"}function b(){this.nextSibling&&this.parentNode.appendChild(this)}function x(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function C(){return null}function D(){var t=this.parentNode;t&&t.removeChild(this)}function N(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function A(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function S(t,e,n){return t=E(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function E(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function V(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;o>r;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function j(t,e,n){var r=X.hasOwnProperty(t.type)?S:E;return function(i,o,a){var u,s=this.__on,c=r(e,o,a);if(s)for(var l=0,f=s.length;f>l;++l)if((u=s[l]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),void(u.value=e);this.addEventListener(t.type,c,n),u={type:t.type,name:t.name,value:e,listener:c,capture:n},s?s.push(u):this.__on=[u]}}function O(t,e,n){var r=h(t),i=r.CustomEvent;\"function\"==typeof i?i=new i(e,n):(i=r.document.createEvent(\"Event\"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function P(t,e){this._groups=t,this._parents=e}function T(){return new P([[document.documentElement]],W)}function B(t){return\"string\"==typeof t?new P([[document.querySelector(t)]],[document.documentElement]):new P([[t]],W)}function I(){return new R}function R(){this._=\"@\"+(++Y).toString(36)}function L(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function M(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}var F=\"http://www.w3.org/1999/xhtml\",k={svg:\"http://www.w3.org/2000/svg\",xhtml:F,xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"},q=function(t){return function(){return this.matches(t)}};if(\"undefined\"!=typeof document){var H=document.documentElement;if(!H.matches){var U=H.webkitMatchesSelector||H.msMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector;q=function(t){return function(){return U.call(this,t)}}}}var z=q;s.prototype={constructor:s,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var G=\"$\";m.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute(\"class\",this._names.join(\" \")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute(\"class\",this._names.join(\" \")))},contains:function(t){return this._names.indexOf(t)>=0}};var X={};t.event=null,\"undefined\"!=typeof document&&(\"onmouseenter\"in document.documentElement||(X={mouseenter:\"mouseover\",mouseleave:\"mouseout\"}));var W=[null];P.prototype=T.prototype={constructor:P,select:function(t){\"function\"!=typeof t&&(t=i(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;n>o;++o)for(var a,u,s=e[o],c=s.length,l=r[o]=new Array(c),f=0;c>f;++f)(a=s[f])&&(u=t.call(a,a.__data__,f,s))&&(\"__data__\"in a&&(u.__data__=a.__data__),l[f]=u);return new P(r,this._parents)},selectAll:function(t){\"function\"!=typeof t&&(t=a(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;n>o;++o)for(var u,s=e[o],c=s.length,l=0;c>l;++l)(u=s[l])&&(r.push(t.call(u,u.__data__,l,s)),i.push(u));return new P(r,i)},filter:function(t){\"function\"!=typeof t&&(t=z(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;n>i;++i)for(var o,a=e[i],u=a.length,s=r[i]=[],c=0;u>c;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&s.push(o);return new P(r,this._parents)},data:function(t,e){if(!t)return v=new Array(this.size()),f=-1,this.each(function(t){v[++f]=t}),v;var n=e?l:c,r=this._parents,i=this._groups;\"function\"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),u=new Array(o),s=new Array(o),f=0;o>f;++f){var h=r[f],p=i[f],d=p.length,v=t.call(h,h&&h.__data__,f,r),m=v.length,g=u[f]=new Array(m),_=a[f]=new Array(m);n(h,p,g,_,s[f]=new Array(d),v,e);for(var y,w,b=0,x=0;m>b;++b)if(y=g[b]){for(b>=x&&(x=b+1);!(w=_[x])&&++x<m;);y._next=w||null}}return a=new P(a,r),a._enter=u,a._exit=s,a},enter:function(){return new P(this._enter||this._groups.map(u),this._parents)},exit:function(){return new P(this._exit||this._groups.map(u),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;o>u;++u)for(var s,c=e[u],l=n[u],f=c.length,h=a[u]=new Array(f),p=0;f>p;++p)(s=c[p]||l[p])&&(h[p]=s);for(;r>u;++u)a[u]=e[u];return new P(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=f);for(var n=this._groups,r=n.length,i=new Array(r),o=0;r>o;++o){for(var a,u=n[o],s=u.length,c=i[o]=new Array(s),l=0;s>l;++l)(a=u[l])&&(c[l]=a);c.sort(e)}return new P(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;n>e;++e)for(var r=t[e],i=0,o=r.length;o>i;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;r>n;++n)for(var i,o=e[n],a=0,u=o.length;u>a;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var r=e(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((null==n?r.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:\"function\"==typeof n?r.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:r.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(r,n))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:\"function\"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?\"\":n)):p(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:\"function\"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=d(t+\"\");if(arguments.length<2){for(var r=v(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((\"function\"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?g:_)(this,t)}}:e?function(t){return function(){g(this,t)}}:function(t){return function(){_(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?y:(\"function\"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?\"\":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?w:(\"function\"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?\"\":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(b)},lower:function(){return this.each(x)},append:function(t){var e=\"function\"==typeof t?t:n(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var r=\"function\"==typeof t?t:n(t),o=null==e?C:\"function\"==typeof e?e:i(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)})},remove:function(){return this.each(D)},clone:function(t){return this.select(t?A:N)},datum:function(t){return arguments.length?this.property(\"__data__\",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\\s+/).map(function(t){var e=\"\",n=t.indexOf(\".\");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+\"\"),a=o.length;if(!(arguments.length<2)){for(u=e?j:V,null==n&&(n=!1),r=0;a>r;++r)this.each(u(o[r],e,n));return this}var u=this.node().__on;if(u)for(var s,c=0,l=u.length;l>c;++c)for(r=0,s=u[c];a>r;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,e){return this.each((\"function\"==typeof e?function(t,e){return function(){return O(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return O(this,t,e)}})(t,e))}};var Y=0;R.prototype=I.prototype={constructor:R,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},t.create=function(t){return B(n(t).call(document.documentElement))},t.creator=n,t.local=I,t.matcher=z,t.mouse=function(t){var e=L();return e.changedTouches&&(e=e.changedTouches[0]),M(t,e)},t.namespace=e,t.namespaces=k,t.clientPoint=M,t.select=B,t.selectAll=function(t){return\"string\"==typeof t?new P([document.querySelectorAll(t)],[document.documentElement]):new P([null==t?[]:t],W)},t.selection=T,t.selector=i,t.selectorAll=a,t.style=p,t.touch=function(t,e,n){arguments.length<3&&(n=e,e=L().changedTouches);for(var r,i=0,o=e?e.length:0;o>i;++i)if((r=e[i]).identifier===n)return M(t,r);return null},t.touches=function(t,e){null==e&&(e=L().touches);for(var n=0,r=e?e.length:0,i=new Array(r);r>n;++n)i[n]=M(t,e[n]);return i},t.window=h,t.customEvent=function(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}},Object.defineProperty(t,\"__esModule\",{value:!0})});var d3=window.d3,__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),powerbi;!function(t){var e;!function(e){var n;!function(e){var n;!function(e){\"use strict\";var n=t.extensibility.utils.dataview.DataViewObjectsParser,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dataDisplay=new i,e.dataOption=new o,e}return __extends(e,t),e}(n);e.VisualSettings=r;var i=function(){function t(){this.backColor=\"#D3D3D3\",this.fill=\"#16B1E6\"}return t}();e.dataDisplaySettings=i;var o=function(){function t(){this.ptPassage=!0,this.prctMode=!1}return t}();e.dataOptionSettings=o}(n=e.pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5||(e.pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5={}))}(n=e.visual||(e.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){\"use strict\";var e=function(){function e(t){var e=document.createElement(\"div\");e.className=\"container\";var n=document.createElement(\"div\");n.className=\"left_container\";var r=document.createElement(\"div\");r.className=\"current_value\",this.value_text=r.appendChild(document.createTextNode(\"\")),n.appendChild(r);var i=document.createElement(\"div\");i.className=\"percent_value\",this.percent_text=i.appendChild(document.createTextNode(\"\")),n.appendChild(i),this.right_container=document.createElement(\"div\"),this.right_container.className=\"none\";var o=document.createElement(\"div\");o.className=\"reste_value\",this.reste_text=o.appendChild(document.createTextNode(\"\")),this.right_container.appendChild(o);var a=document.createElement(\"div\");a.className=\"reste_legend\",a.appendChild(document.createTextNode(\"Reste à faire\")),this.right_container.appendChild(a),this.bottom_container=document.createElement(\"div\"),this.bottom_container.className=\"none\";var u=document.createElement(\"div\");u.className=\"ptpassage_value\",this.ptpassage_text=u.appendChild(document.createTextNode(\"0\")),this.bottom_container.appendChild(u);var s=document.createElement(\"div\");s.className=\"ptpassage_legend\",s.appendChild(document.createTextNode(\"Point de passage\")),this.bottom_container.appendChild(s),e.appendChild(n),e.appendChild(this.right_container),t.element.appendChild(e),this.svg=d3.select(t.element).append(\"svg\").attr(\"height\",40),t.element.appendChild(this.bottom_container),this.gcontainer=this.svg.append(\"g\").classed(\"percenter\",!0);var c=20;this.back_rectangle=this.gcontainer.append(\"g\").selectAll(\"rect\").data([t.element.offsetWidth]).enter().append(\"rect\").attr(\"height\",c),this.front_rectangle=this.gcontainer.append(\"g\").selectAll(\"rect\").data([0]).enter().append(\"rect\").attr(\"height\",c),this.objectif_rectangle=this.gcontainer.append(\"g\").selectAll(\"rect\").data([0]).enter().append(\"rect\").attr(\"fill\",\"black\").attr(\"height\",c).attr(\"width\",1).classed(\"none\",!0),this.objectif_text=this.gcontainer.append(\"g\").selectAll(\"text\").data([\"\"]).enter().append(\"text\").attr(\"y\",c+20),this.zero_text=this.gcontainer.append(\"g\").append(\"text\").text(\"0\").attr(\"y\",c+20).attr(\"text-anchor\",\"right\").classed(\"none\",!0)}return e.prototype.update=function(t){this.settings=e.parseSettings(t&&t.dataViews&&t.dataViews[0]);var n=+e.getvalue(t.dataViews[0].categorical,\"measure\"),r=+e.getvalue(t.dataViews[0].categorical,\"objectif_measure\"),i=+e.getvalue(t.dataViews[0].categorical,\"pt_passage_measure\");this.svg.attr(\"width\",t.viewport.width),this.back_rectangle.data([t.viewport.width]).attr(\"fill\",this.settings.dataDisplay.backColor).attr(\"width\",function(t){return t}),this.value_text.textContent=n.toLocaleString();var o=t.viewport.width*n/100-10*t.viewport.width/100;if(r){this.right_container.className=\"right_container\",this.reste_text.textContent=r-n>0?(r-n).toLocaleString():\"0\",this.percent_text.textContent=(+(n/r*100).toFixed(0)).toLocaleString()+\"%\";var a=t.viewport.width*r/100-10*t.viewport.width/100;o>a?(o=t.viewport.width-10*t.viewport.width/100,a=o*r/n):(a=t.viewport.width-10*t.viewport.width/100,o=a*n/r),this.front_rectangle.data([o]).attr(\"fill\",this.settings.dataDisplay.fill).attr(\"width\",function(t){return t}),this.zero_text.classed(\"none\",15>a),this.objectif_rectangle.classed(\"none\",!1),this.objectif_rectangle.data([a]).attr(\"x\",function(t){return t}),this.objectif_text.data([r]).attr(\"text-anchor\",50>a?\"right\":\"middle\").text(function(t){return t.toLocaleString()}).attr(\"x\",a),this.settings.dataOption.prctMode&&(this.right_container.className=\"none\",this.percent_text.textContent=\"\",this.objectif_text.text(this.objectif_text.text()+\"%\"),this.value_text.textContent+=\"%\")}else this.front_rectangle.attr(\"width\",\"0\"),this.zero_text.classed(\"none\",!0),this.objectif_rectangle.classed(\"none\",!0),this.right_container.className=\"none\",this.objectif_text.text(\"\"),this.percent_text.textContent=\"\";this.bottom_container.className=this.settings.dataOption.ptPassage&&i?\"container_bottom\":\"none\",this.ptpassage_text.textContent=i.toLocaleString()},e.parseSettings=function(e){return t.VisualSettings.parse(e)},e.getvalue=function(t,e){var n=t.values.filter(function(t){return t.source.roles[e]}).map(function(t){return t.values[0]});return n&&1===n.length?n[0]:void 0},e.prototype.enumerateObjectInstances=function(e){return t.VisualSettings.enumerateObjectInstances(this.settings||t.VisualSettings.getDefault(),e)},e}();t.Visual=e}(e=t.pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5||(t.pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5={}))}(e=t.visual||(t.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){e.pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5={name:\"pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5\",displayName:\"pbi_flatprogress_1_11\",\"class\":\"Visual\",version:\"1.0.0\",apiVersion:\"1.11.0\",create:function(e){return new t.extensibility.visual.pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5.Visual(e)},custom:!0}}(n=e.plugins||(e.plugins={}))}(e=t.visuals||(t.visuals={}))}(powerbi||(powerbi={}));","css":".visual-pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5 .none{display:none}.visual-pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5 .container{display:flex;justify-content:space-between;margin-bottom:4px}.visual-pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5 .left_container{display:flex;align-items:baseline}.visual-pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5 .right_container{display:flex;flex-direction:column;align-items:center}.visual-pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5 .current_value{font-size:61px}.visual-pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5 .percent_value{margin-left:16px;font-size:25px}.visual-pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5 .reste_value{fill:#333;font-family:wf_standard-font,helvetica,arial,sans-serif;font-size:36px}.visual-pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5 .reste_legend{font-size:16px}.visual-pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5 .container_bottom{display:flex;flex-direction:column;align-items:center}.visual-pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5 .ptpassage_value{fill:#333;font-family:wf_standard-font,helvetica,arial,sans-serif;font-size:36px}.visual-pbiflatprogress111DDC2C0F0D0384236A63C11C134C5CDB5 .ptpassage_legend{fill:#000;font-size:16px}","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD5JREFUeNpiYBhxgBFK/ycgT3cD/5PrAMIuFNv47D8lBuxVeovCZ6K2C0cNHIQGDhj4jyc3DQ4DRwFuABBgAPyFC4TULc3MAAAAAElFTkSuQmCC"}}